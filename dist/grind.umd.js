!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.Grind={})}(this,function(n){"use strict";var e=function(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.reduce(function(n,e){return Object.keys(e).forEach(function(t){return n[t]=(n[t]||0)+e[t]}),n},{})},t=function(n){return function(e){return Object.keys(e).reduce(function(t,o){return t||n(e[o],o)},!1)}},o=function(n,e){return void 0===e?t(n):t(e)(n)},r=function(n){return n<0},c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],c=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,u=function(n){var t=e(a,n);o(t,r)||s(t)},f=function(){return t(a,u)},a=n,s=function(n){a=n,f()},d=setInterval(function(){var n,t=c(a,i/1e3),u=(n=t,n instanceof Array?n:[n]).reduce(function(n,t){var c=e(n,t);return o(c,r)?n:c},a);s(u)},i);return f(),function(){return clearInterval(d)}},i=[{name:"Money",value:function(n){return"&euro;"+(n.coins||0).toFixed(2)}},{name:"Coffee served",value:function(n){return"<b>"+(n.coffeeServed||0).toFixed(0)+" cups</b>"}},{name:"Coffee beans",value:function(n){return(n.beans||0).toFixed(3)+" KG"},action:"Buy [&euro;2.50]",disabled:function(n){return n.coins<2.5},onclick:"buy({ coins: -2.5, beans: 1 })"},{name:"Cups of coffee",value:function(n){return(n.coffee||0).toFixed(0)},action:"Brew [14g]",disabled:function(n){return(n.beans||0)<.014},onclick:"buy({ beans: -0.014, coffee: 1 })"},{name:"Coffee Machines",value:function(n){return n.coffeeMachines||0},visible:function(n){return n.coffeeMachines>0||n.coins>10},action:function(n){return"Buy coffee machine [&euro;30.00]"},disabled:function(n){return n.coins<30},onclick:function(n){return"buy({ coins: -30, coffeeMachines: 1 })"}}],u=function(n){return function(e,t){window.buy=t,n.innerHTML=function(n){var e=function(e){return e instanceof Function?e(n):e};return i.filter(function(e){return!e.visible||e.visible(n)}).map(function(n){return e(n.name)+": "+e(n.value)+" "+(n.action?'<button onclick="'+e(n.onclick)+'" '+(e(n.disabled)?"DISABLED":"")+">"+e(n.action)+"</button>":"")}).join("<br />")}(e)}},f=function(n,e){return[{coffee:-1*e,coffeeServed:e,coins:1.2*e},{beans:(n.coffeeMachines||0)*e*.5*-.014,coffee:(n.coffeeMachines||0)*e*.5}]};n.start=function(n){c({coins:10},u(n),f,250)},Object.defineProperty(n,"__esModule",{value:!0})});
